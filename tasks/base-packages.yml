---
- name: Install base packages
  package:
    name: "{{ item }}"
    state: present
    update_cache: true
  with_items:
    - apt-transport-https
    - ca-certificates
    - curl
    - git
    - vim
    - htop
    - sudo
    - gnupg2
    - python-pip
    - python3-pip
    - gcc
    - make
    - autoconf
    - autoconf-archive
    - autogen
    - automake
    - pkg-config
    - lm-sensors
    - dstat
    - sysstat
    - snmp
    - mtr
    - ncdu
    - tcpdump
    - python-dev
    - net-tools
    - locate
    - man
    - bash-completion
    - dnsutils
    - iftop

- name: Install ESXI VM Tools
  package:
    name: open-vm-tools
    state: present
    update_cache: true
  when: COMMOM_VM_HOST == "ESXi"

- name: Install ESXI VM Tools
  package:
    name: qemu-guest-agent
    state: present
    update_cache: true
  when: COMMOM_VM_HOST == "Proxmox"
